{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _classCallCheck from \"C:/Users/lukas/Desktop/MailMergeExercise/mailmergeexercise/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/lukas/Desktop/MailMergeExercise/mailmergeexercise/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"C:/Users/lukas/Desktop/MailMergeExercise/mailmergeexercise/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:/Users/lukas/Desktop/MailMergeExercise/mailmergeexercise/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\lukas\\\\Desktop\\\\MailMergeExercise\\\\mailmergeexercise\\\\frontend\\\\src\\\\pages\\\\FormsPage.js\";\nimport React, { Component } from 'react';\nimport { MDBContainer, MDBRow, MDBCol, MDBInput, MDBBtn, MDBIcon, MDBCard, MDBCardBody, MDBModal, MDBModalBody, MDBModalFooter } from 'mdbreact';\nimport DocsLink from '../components/docsLink';\nimport SectionContainer from '../components/sectionContainer';\nimport DynamicForm from '../components/dynamicform';\n\nvar FormsPage = /*#__PURE__*/function (_Component) {\n  _inherits(FormsPage, _Component);\n\n  var _super = _createSuper(FormsPage);\n\n  function FormsPage() {\n    var _this;\n\n    _classCallCheck(this, FormsPage);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      modal: false,\n      formActivePanel1: 1,\n      formActivePanel1Changed: false,\n      template: \"\",\n      isLoading: false,\n      isError: false,\n      email: \"\",\n      subject: \"\",\n      templateValues: {},\n      preview: \"\"\n    };\n\n    _this.toggle = function () {\n      var modal = _this.state.modal;\n\n      _this.setState({\n        modal: !modal\n      });\n    };\n\n    _this.swapFormActive = function (a) {\n      return function (param) {\n        return function (e) {\n          _this.setState({\n            ['formActivePanel' + a]: param,\n            ['formActivePanel' + a + 'Changed']: true\n          });\n        };\n      };\n    };\n\n    _this.handleTemplateNextClick = function (e) {\n      _this.state.templateValues = {};\n\n      var keys = _this.state.template.match(/%%([a-zA-Z_]*)%%/g);\n\n      if (keys) {\n        keys = keys.map(function (el) {\n          return el.slice(2, el.length - 2);\n        });\n        keys.forEach(function (val, ind) {\n          _this.state.templateValues[val] = \"\";\n        });\n      }\n\n      console.log(_this.state);\n      return _this.handleNextPrevClick(1)(2)(e);\n    };\n\n    _this.handleTemplateValuesNextClick = function (e) {\n      _this.state.preview = _this.state.template;\n\n      for (var key in _this.state.templateValues) {\n        _this.state.preview = _this.state.preview.replace(\"%%\" + key + \"%%\", _this.state.templateValues[key]);\n      }\n\n      _this.setState({\n        preview: _this.state.preview\n      });\n\n      console.log(_this.state);\n      return _this.handleNextPrevClick(1)(3)(e);\n    };\n\n    _this.handleSubmission = function (e) {\n      //e.currentTarget.form.reportValidity();\n      if (e.currentTarget.form.checkValidity()) {\n        var recipeUrl = 'http://localhost:9000/api/sendgridmail';\n        var postBody = {\n          template: _this.state.template,\n          templateValues: _this.state.templateValues,\n          email: _this.state.email,\n          subject: _this.state.subject\n        };\n        var requestMetadata = {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(postBody)\n        };\n\n        _this.setState({\n          isLoading: true,\n          isError: false\n        });\n\n        _this.handleNextPrevClick(1)(4)(e);\n\n        fetch(recipeUrl, requestMetadata).then(function (res) {\n          return res.json();\n        }).then(function (email) {\n          console.log(email);\n\n          _this.setState({\n            preview: email.text,\n            isLoading: false,\n            isError: false\n          });\n        }).catch(function (err) {\n          var errStatus = err.response ? err.response.status : 500;\n\n          _this.setState({\n            isLoading: false,\n            isError: true,\n            error: errStatus\n          });\n        });\n      } else {\n        e.currentTarget.form.reportValidity();\n      }\n    };\n\n    _this.handleNextPrevClick = function (a) {\n      return function (param) {\n        return function (e) {\n          _this.setState({\n            ['formActivePanel' + a]: param,\n            ['formActivePanel' + a + 'Changed']: true\n          });\n        };\n      };\n    };\n\n    _this.calculateAutofocus = function (a) {\n      if (_this.state['formActivePanel' + a + 'Changed']) {\n        return true;\n      }\n    };\n\n    _this.updateFormValue = function (key) {\n      return function (evt) {\n        _this.state.templateValues[key] = evt.target.value;\n\n        _this.setState({\n          templateValues: _this.state.templateValues\n        });\n\n        _this.state.preview = _this.state.template;\n\n        for (var kkey in _this.state.templateValues) {\n          _this.state.preview = _this.state.preview.replace(\"%%\" + kkey + \"%%\", _this.state.templateValues[kkey]);\n        }\n\n        _this.setState({\n          preview: _this.state.preview\n        });\n      };\n    };\n\n    return _this;\n  }\n\n  _createClass(FormsPage, [{\n    key: \"DynamicFormCreator\",\n    value: function DynamicFormCreator(readonly) {\n      var _this2 = this;\n\n      var beautifyVariable = function beautifyVariable(variableName) {\n        var str = variableName.toString().split(\"_\").map(function (el) {\n          return el.charAt(0).toUpperCase() + el.slice(1);\n        }).join(\" \");\n        return str;\n      };\n\n      console.log(this.state);\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: Object.keys(this.state.templateValues).map(function (key, ind) {\n          return /*#__PURE__*/_jsxDEV(MDBInput, {\n            label: beautifyVariable(key),\n            value: _this2.state.templateValues[key],\n            onChange: function onChange(evt) {\n              return _this2.updateFormValue(key)(evt);\n            },\n            className: \"mt-3 \",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 7\n          }, _this2);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 5\n      }, this);\n    }\n  }, {\n    key: \"updateTemplateValue\",\n    value: function updateTemplateValue(evt) {\n      var _this3 = this;\n\n      var keys = this.state.template.match(/%%([a-zA-Z_]*)%%/g);\n\n      if (keys) {\n        keys = keys.map(function (el) {\n          return el.slice(2, el.length - 2);\n        });\n        keys.forEach(function (val, ind) {\n          if (!_this3.state.templateValues[val]) _this3.state.templateValues[val] = \"\";\n        });\n      }\n\n      this.setState({\n        template: evt.target.value\n      });\n      this.state.preview = this.state.template;\n\n      for (var key in this.state.templateValues) {\n        this.state.preview = this.state.preview.replace(\"%%\" + key + \"%%\", this.state.templateValues[key]);\n      }\n\n      this.setState({\n        preview: this.state.preview\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var modal = this.state.modal;\n      return /*#__PURE__*/_jsxDEV(MDBContainer, {\n        className: \"mt-5\",\n        children: /*#__PURE__*/_jsxDEV(MDBRow, {\n          children: /*#__PURE__*/_jsxDEV(MDBCol, {\n            md: \"12\",\n            children: /*#__PURE__*/_jsxDEV(SectionContainer, {\n              children: /*#__PURE__*/_jsxDEV(MDBContainer, {\n                children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                  className: \"text-center font-weight-bold pt-4 pb-1 mb-2\",\n                  children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Email form  \"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 177,\n                    columnNumber: 77\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 177,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 178,\n                  columnNumber: 16\n                }, this), /*#__PURE__*/_jsxDEV(MDBRow, {\n                  children: [this.state.formActivePanel1 == 1 && /*#__PURE__*/_jsxDEV(MDBCol, {\n                    md: \"12\",\n                    children: /*#__PURE__*/_jsxDEV(\"form\", {\n                      role: \"form\",\n                      id: \"email_create_panel\",\n                      class: \"needs-validation\",\n                      action: \"\",\n                      method: \"post\",\n                      novalidate: true,\n                      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                        className: \"font-weight-bold pl-0 my-4\",\n                        children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                          children: \"Template\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 185,\n                          columnNumber: 64\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 185,\n                        columnNumber: 21\n                      }, this), /*#__PURE__*/_jsxDEV(MDBInput, {\n                        label: \"Template\",\n                        type: \"textarea\",\n                        id: \"templatetext\",\n                        rows: \"6\",\n                        value: this.state.template,\n                        onChange: function onChange(evt) {\n                          return _this4.updateTemplateValue(evt);\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 186,\n                        columnNumber: 22\n                      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                        className: \"font-weight-bold pl-0 my-4\",\n                        children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                          children: \"Email\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 187,\n                          columnNumber: 65\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 187,\n                        columnNumber: 22\n                      }, this), /*#__PURE__*/_jsxDEV(MDBInput, {\n                        label: \"To Email\",\n                        type: \"email\",\n                        value: this.state.email,\n                        onChange: function onChange(evt) {\n                          return _this4.setState({\n                            email: evt.target.value\n                          });\n                        },\n                        className: \"mt-3 \",\n                        required: true\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 188,\n                        columnNumber: 20\n                      }, this), /*#__PURE__*/_jsxDEV(MDBInput, {\n                        label: \"Subject\",\n                        value: this.state.subject,\n                        onChange: function onChange(evt) {\n                          return _this4.setState({\n                            subject: evt.target.value\n                          });\n                        },\n                        className: \"mt-3 \",\n                        required: true\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 189,\n                        columnNumber: 20\n                      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                        className: \"font-weight-bold pl-0 my-4\",\n                        children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                          children: \"Template Values\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 190,\n                          columnNumber: 63\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 190,\n                        columnNumber: 20\n                      }, this), this.DynamicFormCreator(), /*#__PURE__*/_jsxDEV(\"h3\", {\n                        className: \"font-weight-bold pl-0 my-4\",\n                        children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                          children: \"Preview\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 192,\n                          columnNumber: 63\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 192,\n                        columnNumber: 20\n                      }, this), /*#__PURE__*/_jsxDEV(MDBInput, {\n                        label: \"Template\",\n                        className: \"\",\n                        type: \"textarea\",\n                        id: \"templatetext\",\n                        rows: \"6\",\n                        value: this.state.preview,\n                        required: true\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 193,\n                        columnNumber: 20\n                      }, this), /*#__PURE__*/_jsxDEV(MDBBtn, {\n                        color: \"success\",\n                        rounded: true,\n                        className: \"float-right\",\n                        onClick: this.handleSubmission,\n                        type: \"submit\",\n                        children: \"submit\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 194,\n                        columnNumber: 20\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 184,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 183,\n                    columnNumber: 22\n                  }, this), this.state.formActivePanel1 == 4 && /*#__PURE__*/_jsxDEV(MDBCol, {\n                    md: \"12\",\n                    children: /*#__PURE__*/_jsxDEV(\"form\", {\n                      role: \"form\",\n                      id: \"email_send_panel\",\n                      class: \"needs-validation\",\n                      action: \"\",\n                      method: \"post\",\n                      children: [!this.state.isLoading && !this.state.isError && /*#__PURE__*/_jsxDEV(\"div\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                          className: \"text-center font-weight-bold my-4\",\n                          children: \"Email sent!\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 203,\n                          columnNumber: 78\n                        }, this), /*#__PURE__*/_jsxDEV(MDBInput, {\n                          label: \"To Email\",\n                          type: \"email\",\n                          value: this.state.email,\n                          readonly: true,\n                          className: \"mt-3\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 204,\n                          columnNumber: 23\n                        }, this), /*#__PURE__*/_jsxDEV(MDBInput, {\n                          label: \"Subject\",\n                          value: this.state.subject,\n                          readonly: true,\n                          className: \"mt-3\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 205,\n                          columnNumber: 23\n                        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                          className: \"font-weight-bold pl-0 my-4\",\n                          children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                            children: \"Preview\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 206,\n                            columnNumber: 66\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 206,\n                          columnNumber: 23\n                        }, this), /*#__PURE__*/_jsxDEV(MDBInput, {\n                          label: \"Template\",\n                          type: \"textarea\",\n                          id: \"templatetext\",\n                          rows: \"6\",\n                          value: this.state.preview\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 207,\n                          columnNumber: 23\n                        }, this), /*#__PURE__*/_jsxDEV(MDBBtn, {\n                          color: \"mdb-color\",\n                          rounded: true,\n                          className: \"float-right\",\n                          onClick: this.handleNextPrevClick(1)(1),\n                          children: \"Return to start\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 208,\n                          columnNumber: 23\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 203,\n                        columnNumber: 73\n                      }, this), this.state.isLoading && /*#__PURE__*/_jsxDEV(\"h2\", {\n                        className: \"text-center font-weight-bold my-4\",\n                        children: [\" \", /*#__PURE__*/_jsxDEV(\"div\", {\n                          class: \"spinner-grow text-success\",\n                          style: {\n                            fontSize: \"40px\"\n                          },\n                          role: \"status\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 212,\n                          columnNumber: 76\n                        }, this), \"  \\xA0 Busy sending\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 212,\n                        columnNumber: 25\n                      }, this), !this.state.isLoading && this.state.isError && /*#__PURE__*/_jsxDEV(\"div\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                          className: \"text-center font-weight-bold my-4\",\n                          children: [\" \", /*#__PURE__*/_jsxDEV(\"div\", {\n                            class: \"spinner-grow text-success\",\n                            style: {\n                              fontSize: \"40px\"\n                            },\n                            role: \"status\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 218,\n                            columnNumber: 76\n                          }, this), \"  \\xA0 Error: Email not sent. Code \", this.state.error, \" \"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 218,\n                          columnNumber: 25\n                        }, this), /*#__PURE__*/_jsxDEV(MDBBtn, {\n                          color: \"mdb-color\",\n                          rounded: true,\n                          className: \"float-right\",\n                          onClick: this.handleNextPrevClick(1)(1),\n                          children: \"Return to start\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 220,\n                          columnNumber: 23\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 217,\n                        columnNumber: 23\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 202,\n                      columnNumber: 26\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 201,\n                    columnNumber: 22\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 181,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 7\n      }, this);\n    }\n  }]);\n\n  return FormsPage;\n}(Component);\n\nexport default FormsPage;","map":{"version":3,"sources":["C:/Users/lukas/Desktop/MailMergeExercise/mailmergeexercise/frontend/src/pages/FormsPage.js"],"names":["React","Component","MDBContainer","MDBRow","MDBCol","MDBInput","MDBBtn","MDBIcon","MDBCard","MDBCardBody","MDBModal","MDBModalBody","MDBModalFooter","DocsLink","SectionContainer","DynamicForm","FormsPage","state","modal","formActivePanel1","formActivePanel1Changed","template","isLoading","isError","email","subject","templateValues","preview","toggle","setState","swapFormActive","a","param","e","handleTemplateNextClick","keys","match","map","el","slice","length","forEach","val","ind","console","log","handleNextPrevClick","handleTemplateValuesNextClick","key","replace","handleSubmission","currentTarget","form","checkValidity","recipeUrl","postBody","requestMetadata","method","headers","body","JSON","stringify","fetch","then","res","json","text","catch","err","errStatus","response","status","error","reportValidity","calculateAutofocus","updateFormValue","evt","target","value","kkey","readonly","beautifyVariable","variableName","str","toString","split","charAt","toUpperCase","join","Object","updateTemplateValue","DynamicFormCreator","fontSize"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport {\r\n  MDBContainer,\r\n  MDBRow,\r\n  MDBCol,\r\n  MDBInput,\r\n  MDBBtn,\r\n  MDBIcon,\r\n  MDBCard,\r\n  MDBCardBody,\r\n  MDBModal,\r\n  MDBModalBody,\r\n  MDBModalFooter\r\n} from 'mdbreact';\r\nimport DocsLink from '../components/docsLink';\r\nimport SectionContainer from '../components/sectionContainer';\r\nimport DynamicForm from '../components/dynamicform';\r\nclass FormsPage extends Component {\r\n  state = {\r\n    modal: false,\r\n    formActivePanel1: 1,\r\n    formActivePanel1Changed: false,\r\n    template : \"\",\r\n    isLoading:false,\r\n    isError:false,\r\n    email:\"\",\r\n    subject:\"\",\r\n    templateValues:{},\r\n    preview:\"\"\r\n  };\r\n\r\n  toggle = () => {\r\n    const { modal } = this.state;\r\n    this.setState({\r\n      modal: !modal\r\n    });\r\n  };\r\n  swapFormActive = (a) => (param) => (e) => {\r\n    this.setState({\r\n      ['formActivePanel' + a]: param,\r\n      ['formActivePanel' + a + 'Changed']: true\r\n    });\r\n  }\r\n  handleTemplateNextClick = (e) => {\r\n    this.state.templateValues = {};\r\n    var keys = this.state.template.match(/%%([a-zA-Z_]*)%%/g);\r\n    if(keys){\r\n      keys = keys.map((el)=>{return el.slice(2,el.length-2);});\r\n      keys.forEach((val,ind)=>{this.state.templateValues[val]=\"\";});\r\n    }\r\n   \r\n    console.log(this.state); \r\n    return this.handleNextPrevClick(1)(2)(e);\r\n  }\r\n  handleTemplateValuesNextClick = (e) => {\r\n    this.state.preview = this.state.template;\r\n    for(var key in this.state.templateValues ){\r\n      this.state.preview = this.state.preview.replace(\"%%\" + key + \"%%\",this.state.templateValues[key]);\r\n    }\r\n    this.setState({\r\n      preview: this.state.preview \r\n    });\r\n    console.log(this.state); \r\n    return this.handleNextPrevClick(1)(3)(e);\r\n  }\r\n  handleSubmission = (e)=>{\r\n  //e.currentTarget.form.reportValidity();\r\n    if(e.currentTarget.form.checkValidity()){\r\n      \r\n      const recipeUrl = 'http://localhost:9000/api/sendgridmail';\r\n      const postBody = {\r\n          template: this.state.template,\r\n          templateValues : this.state.templateValues,\r\n          email : this.state.email,\r\n          subject : this.state.subject\r\n      };\r\n      const requestMetadata = {\r\n          method: 'POST',\r\n          headers: {\r\n              'Content-Type': 'application/json'\r\n          },\r\n          body: JSON.stringify(postBody)\r\n      };\r\n      this.setState({  isLoading:true,isError:false });\r\n      this.handleNextPrevClick(1)(4)(e);\r\n\r\n      fetch(recipeUrl, requestMetadata)\r\n          .then(res => res.json())\r\n          .then(email => {\r\n              console.log(email);\r\n              this.setState({ preview:email.text, isLoading:false, isError:false });\r\n\r\n          }).catch(err => {\r\n            const errStatus = err.response ? err.response.status : 500;\r\n            \r\n              this.setState({ isLoading:false, isError:true, error: errStatus});\r\n           \r\n          });\r\n     }else{\r\n      e.currentTarget.form.reportValidity()\r\n     }\r\n      \r\n\r\n  }\r\n  handleNextPrevClick = (a) => (param) => (e) => {\r\n    \r\n    this.setState({\r\n      ['formActivePanel' + a]: param,\r\n      ['formActivePanel' + a + 'Changed']: true\r\n    });\r\n  }\r\n  \r\ncalculateAutofocus = (a) => {\r\n  if (this.state['formActivePanel' + a + 'Changed']) {\r\n    return true\r\n  }\r\n}\r\nDynamicFormCreator(readonly){\r\n  const beautifyVariable = (variableName) =>{\r\n    var str = variableName.toString().split(\"_\").map((el)=>{return el.charAt(0).toUpperCase()  + el.slice(1);}).join(\" \");\r\n    return str;\r\n  };\r\n  console.log(this.state);\r\n  return (\r\n    <div>\r\n    {Object.keys(this.state.templateValues).map( (key, ind) => {return (\r\n      <MDBInput label={beautifyVariable(key)} value={this.state.templateValues[key]}  onChange={evt => this.updateFormValue(key)(evt)} className=\"mt-3 \" required/>\r\n    )})}\r\n    </div>\r\n  );\r\n\r\n};\r\nupdateFormValue = (key) => (evt) => {\r\n  this.state.templateValues[key] =  evt.target.value;\r\n\r\n  this.setState({\r\n    templateValues: this.state.templateValues\r\n  });\r\n  this.state.preview = this.state.template;\r\n  for(var kkey in this.state.templateValues ){\r\n    this.state.preview = this.state.preview.replace(\"%%\" + kkey + \"%%\",this.state.templateValues[kkey]);\r\n  }\r\n  this.setState({\r\n    preview: this.state.preview \r\n  });\r\n}\r\nupdateTemplateValue(evt){\r\n  var keys = this.state.template.match(/%%([a-zA-Z_]*)%%/g);\r\n  if(keys){\r\n    keys = keys.map((el)=>{return el.slice(2,el.length-2);});\r\n    keys.forEach((val,ind)=>{if(!this.state.templateValues[val])this.state.templateValues[val]=\"\";});\r\n  }\r\n  \r\n  this.setState({\r\n    template: evt.target.value\r\n  });\r\n  \r\n  this.state.preview = this.state.template;\r\n  for(var key in this.state.templateValues ){\r\n    this.state.preview = this.state.preview.replace(\"%%\" + key + \"%%\",this.state.templateValues[key]);\r\n  }\r\n  this.setState({\r\n    preview: this.state.preview \r\n  });\r\n}\r\n  render() {\r\n    const { modal } = this.state;\r\n\r\n    return (\r\n      <MDBContainer className='mt-5'>\r\n        \r\n       \r\n          <MDBRow>\r\n            <MDBCol md='12'>\r\n              <SectionContainer>\r\n              <MDBContainer>\r\n                <h2 className=\"text-center font-weight-bold pt-4 pb-1 mb-2\"><strong>Email form  </strong></h2>\r\n               <hr></hr>\r\n\r\n              \r\n                  <MDBRow>\r\n                    {this.state.formActivePanel1 == 1 &&\r\n                    (<MDBCol md=\"12\">\r\n                        <form role=\"form\" id=\"email_create_panel\" class=\"needs-validation\" action=\"\" method=\"post\" novalidate>\r\n                    <h3 className=\"font-weight-bold pl-0 my-4\"><strong>Template</strong></h3>\r\n                     <MDBInput label=\"Template\" type=\"textarea\" id=\"templatetext\" rows=\"6\" value={this.state.template} onChange={evt => this.updateTemplateValue(evt)}/>\r\n                     <h3 className=\"font-weight-bold pl-0 my-4\"><strong>Email</strong></h3> \r\n                   <MDBInput label=\"To Email\" type=\"email\" value={this.state.email} onChange={evt => this.setState({email: evt.target.value})} className=\"mt-3 \" required/>\r\n                   <MDBInput label=\"Subject\" value={this.state.subject} onChange={evt => this.setState({subject: evt.target.value})} className=\"mt-3 \" required/>\r\n                   <h3 className=\"font-weight-bold pl-0 my-4\"><strong>Template Values</strong></h3>\r\n                   {this.DynamicFormCreator()}\r\n                   <h3 className=\"font-weight-bold pl-0 my-4\"><strong>Preview</strong></h3>\r\n                   <MDBInput label=\"Template\" className=\"\" type=\"textarea\" id=\"templatetext\" rows=\"6\" value={this.state.preview} required/>\r\n                   <MDBBtn color=\"success\" rounded className=\"float-right\" onClick={this.handleSubmission} type=\"submit\">submit</MDBBtn>\r\n                   </form>\r\n                 </MDBCol>)}\r\n\r\n                  \r\n\r\n                    {this.state.formActivePanel1 == 4 &&\r\n                    (<MDBCol md=\"12\">\r\n                         <form role=\"form\" id=\"email_send_panel\" class=\"needs-validation\" action=\"\" method=\"post\">\r\n                      {!this.state.isLoading && !this.state.isError && (<div><h2 className=\"text-center font-weight-bold my-4\">Email sent!</h2>\r\n                      <MDBInput label=\"To Email\" type=\"email\" value={this.state.email} readonly className=\"mt-3\"/>\r\n                      <MDBInput label=\"Subject\" value={this.state.subject} readonly className=\"mt-3\"/>\r\n                      <h3 className=\"font-weight-bold pl-0 my-4\"><strong>Preview</strong></h3>\r\n                      <MDBInput label=\"Template\" type=\"textarea\" id=\"templatetext\" rows=\"6\" value={this.state.preview}/>\r\n                      <MDBBtn color=\"mdb-color\" rounded className=\"float-right\" onClick={this.handleNextPrevClick(1)(1)}>Return to start</MDBBtn>\r\n                      </div>)}\r\n                      {this.state.isLoading && (\r\n                      \r\n                        <h2 className=\"text-center font-weight-bold my-4\"> <div class=\"spinner-grow text-success\" style={{fontSize:\"40px\"}} role=\"status\">\r\n                      </div>  &nbsp; Busy sending</h2>\r\n                                           \r\n                      )}\r\n                       {!this.state.isLoading && this.state.isError && (\r\n                      <div>\r\n                        <h2 className=\"text-center font-weight-bold my-4\"> <div class=\"spinner-grow text-success\" style={{fontSize:\"40px\"}} role=\"status\">\r\n                      </div>  &nbsp; Error: Email not sent. Code {this.state.error} </h2>\r\n                      <MDBBtn color=\"mdb-color\" rounded className=\"float-right\" onClick={this.handleNextPrevClick(1)(1)}>Return to start</MDBBtn>\r\n                      </div>\r\n                      )}\r\n                       </form>\r\n                    </MDBCol>)}\r\n                  </MDBRow>\r\n                \r\n              </MDBContainer>\r\n              </SectionContainer>\r\n            </MDBCol>\r\n            \r\n          </MDBRow>\r\n\r\n      </MDBContainer>\r\n    );\r\n  }\r\n}\r\n\r\nexport default FormsPage;\r\n"]},"metadata":{},"sourceType":"module"}