{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _classCallCheck from \"C:/Users/lukas/Desktop/TechnicalThingy/technicalthingy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/lukas/Desktop/TechnicalThingy/technicalthingy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"C:/Users/lukas/Desktop/TechnicalThingy/technicalthingy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:/Users/lukas/Desktop/TechnicalThingy/technicalthingy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\lukas\\\\Desktop\\\\TechnicalThingy\\\\technicalthingy\\\\src\\\\pages\\\\FormsPage.js\";\nimport React, { Component } from 'react';\nimport { MDBContainer, MDBRow, MDBCol, MDBInput, MDBBtn, MDBIcon, MDBCard, MDBCardBody, MDBModal, MDBModalBody, MDBModalFooter } from 'mdbreact';\nimport DocsLink from '../components/docsLink';\nimport SectionContainer from '../components/sectionContainer';\nimport DynamicForm from '../components/dynamicform';\n\nvar FormsPage = /*#__PURE__*/function (_Component) {\n  _inherits(FormsPage, _Component);\n\n  var _super = _createSuper(FormsPage);\n\n  function FormsPage() {\n    var _this;\n\n    _classCallCheck(this, FormsPage);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      modal: false,\n      formActivePanel1: 1,\n      formActivePanel1Changed: false,\n      template: \"\",\n      isLoading: false,\n      email: \"\",\n      subject: \"\",\n      templateValues: new Object(),\n      preview: {}\n    };\n\n    _this.toggle = function () {\n      var modal = _this.state.modal;\n\n      _this.setState({\n        modal: !modal\n      });\n    };\n\n    _this.swapFormActive = function (a) {\n      return function (param) {\n        return function (e) {\n          _this.setState({\n            ['formActivePanel' + a]: param,\n            ['formActivePanel' + a + 'Changed']: true\n          });\n        };\n      };\n    };\n\n    _this.handleTemplateNextClick = function (e) {\n      _this.state.templateValues = {};\n\n      var keys = _this.state.template.match(/%%([a-zA-Z_]*)%%/g);\n\n      if (keys) {\n        keys = keys.map(function (el) {\n          return el.slice(2, el.length - 2);\n        });\n        keys.forEach(function (val, ind) {\n          _this.state.templateValues[val] = \"\";\n        });\n      }\n\n      console.log(_this.state);\n      return _this.handleNextPrevClick(1)(4)(e);\n    };\n\n    _this.handleTemplateValuesNextClick = function (e) {\n      _this.state.preview = _this.state.template;\n\n      for (var key in _this.state.templateValues) {\n        _this.state.preview = _this.state.preview.replace(\"%%\" + key + \"%%\", _this.state.templateValues[key]);\n      }\n\n      _this.setState({\n        preview: _this.state.preview\n      });\n\n      console.log(_this.state);\n      return _this.handleNextPrevClick(1)(3)(e);\n    };\n\n    _this.handleSubmission = function (e) {\n      var recipeUrl = 'http://localhost:9000/api/sendmail';\n      var postBody = {\n        template: _this.state.template,\n        templateValues: _this.state.templateValues,\n        email: _this.state.email,\n        subject: _this.state.subject\n      };\n      var requestMetadata = {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(postBody)\n      };\n\n      _this.setState({\n        isLoading: true\n      });\n\n      _this.handleNextPrevClick(1)(4)(e);\n\n      fetch(recipeUrl, requestMetadata).then(function (res) {\n        return res.json();\n      }).then(function (email) {\n        console.log(email);\n\n        _this.setState({\n          preview: email.preview,\n          isLoading: false\n        });\n      });\n    };\n\n    _this.handleNextPrevClick = function (a) {\n      return function (param) {\n        return function (e) {\n          _this.setState({\n            ['formActivePanel' + a]: param,\n            ['formActivePanel' + a + 'Changed']: true\n          });\n        };\n      };\n    };\n\n    _this.calculateAutofocus = function (a) {\n      if (_this.state['formActivePanel' + a + 'Changed']) {\n        return true;\n      }\n    };\n\n    _this.updateFormValue = function (key) {\n      return function (evt) {\n        _this.state.templateValues[key] = evt.target.value;\n\n        _this.setState({\n          templateValues: _this.state.templateValues\n        });\n\n        _this.state.preview = _this.state.template;\n\n        for (var kkey in _this.state.templateValues) {\n          _this.state.preview = _this.state.preview.replace(\"%%\" + kkey + \"%%\", _this.state.templateValues[kkey]);\n        }\n\n        _this.setState({\n          preview: _this.state.preview\n        });\n      };\n    };\n\n    return _this;\n  }\n\n  _createClass(FormsPage, [{\n    key: \"DynamicFormCreator\",\n    value: function DynamicFormCreator(readonly) {\n      var _this2 = this;\n\n      var beautifyVariable = function beautifyVariable(variableName) {\n        var str = variableName.toString().split(\"_\").map(function (el) {\n          return el.charAt(0).toUpperCase() + el.slice(1);\n        }).join(\" \");\n        return str;\n      };\n\n      console.log(this.state);\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: Object.keys(this.state.templateValues).map(function (key, ind) {\n          return /*#__PURE__*/_jsxDEV(MDBInput, {\n            label: beautifyVariable(key),\n            value: _this2.state.templateValues[key],\n            onChange: function onChange(evt) {\n              return _this2.updateFormValue(key)(evt);\n            },\n            className: \"mt-3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 7\n          }, _this2);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 5\n      }, this);\n    }\n  }, {\n    key: \"updateTemplateValue\",\n    value: function updateTemplateValue(evt) {\n      this.setState({\n        template: evt.target.value\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var modal = this.state.modal;\n      return /*#__PURE__*/_jsxDEV(MDBContainer, {\n        className: \"mt-5\",\n        children: /*#__PURE__*/_jsxDEV(MDBRow, {\n          children: /*#__PURE__*/_jsxDEV(MDBCol, {\n            md: \"12\",\n            children: /*#__PURE__*/_jsxDEV(SectionContainer, {\n              children: /*#__PURE__*/_jsxDEV(MDBContainer, {\n                children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                  className: \"text-center font-weight-bold pt-4 pb-5 mb-2\",\n                  children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Email form  \"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 146,\n                    columnNumber: 77\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 146,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n                  role: \"form\",\n                  action: \"\",\n                  method: \"post\",\n                  children: /*#__PURE__*/_jsxDEV(MDBRow, {\n                    children: [this.state.formActivePanel1 == 1 && /*#__PURE__*/_jsxDEV(MDBCol, {\n                      md: \"12\",\n                      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                        className: \"font-weight-bold pl-0 my-4\",\n                        children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                          children: \"Template\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 154,\n                          columnNumber: 25\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 153,\n                        columnNumber: 23\n                      }, this), /*#__PURE__*/_jsxDEV(MDBInput, {\n                        label: \"Template\",\n                        type: \"textarea\",\n                        id: \"templatetext\",\n                        rows: \"6\",\n                        value: this.state.template,\n                        onChange: function onChange(evt) {\n                          return _this3.updateTemplateValue(evt);\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 155,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(MDBBtn, {\n                        color: \"mdb-color\",\n                        rounded: true,\n                        className: \"float-right\",\n                        onClick: this.handleTemplateNextClick,\n                        children: \"next\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 156,\n                        columnNumber: 23\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 152,\n                      columnNumber: 22\n                    }, this), this.state.formActivePanel1 == 2 && /*#__PURE__*/_jsxDEV(MDBCol, {\n                      md: \"12\",\n                      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                        className: \"font-weight-bold pl-0 my-4\",\n                        children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                          children: \"Template\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 161,\n                          columnNumber: 67\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 161,\n                        columnNumber: 24\n                      }, this), /*#__PURE__*/_jsxDEV(MDBInput, {\n                        label: \"Template\",\n                        type: \"textarea\",\n                        id: \"templatetext\",\n                        rows: \"6\",\n                        value: this.state.template,\n                        readonly: true,\n                        onChange: function onChange(evt) {\n                          return _this3.updateTemplateValue(evt);\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 162,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                        className: \"font-weight-bold pl-0 my-4\",\n                        children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                          children: \"Email\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 163,\n                          columnNumber: 68\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 163,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(MDBInput, {\n                        label: \"To Email\",\n                        value: this.state.email,\n                        onChange: function onChange(evt) {\n                          return _this3.setState({\n                            email: evt.target.value\n                          });\n                        },\n                        className: \"mt-3\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 164,\n                        columnNumber: 23\n                      }, this), /*#__PURE__*/_jsxDEV(MDBInput, {\n                        label: \"Subject\",\n                        value: this.state.subject,\n                        onChange: function onChange(evt) {\n                          return _this3.setState({\n                            subject: evt.target.value\n                          });\n                        },\n                        className: \"mt-3\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 165,\n                        columnNumber: 23\n                      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                        className: \"font-weight-bold pl-0 my-4\",\n                        children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                          children: \"Template Values\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 166,\n                          columnNumber: 66\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 166,\n                        columnNumber: 23\n                      }, this), this.state.templateValues && this.DynamicFormCreator(), /*#__PURE__*/_jsxDEV(MDBBtn, {\n                        color: \"mdb-color\",\n                        rounded: true,\n                        className: \"float-left\",\n                        onClick: this.handleNextPrevClick(1)(1),\n                        children: \"previous\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 168,\n                        columnNumber: 23\n                      }, this), /*#__PURE__*/_jsxDEV(MDBBtn, {\n                        color: \"mdb-color\",\n                        rounded: true,\n                        className: \"float-right\",\n                        onClick: this.handleTemplateValuesNextClick,\n                        children: \"next\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 169,\n                        columnNumber: 23\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 160,\n                      columnNumber: 22\n                    }, this), this.state.formActivePanel1 == 3 && /*#__PURE__*/_jsxDEV(MDBCol, {\n                      md: \"12\",\n                      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                        className: \"font-weight-bold pl-0 my-4\",\n                        children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                          children: \"Template\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 174,\n                          columnNumber: 67\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 174,\n                        columnNumber: 24\n                      }, this), /*#__PURE__*/_jsxDEV(MDBInput, {\n                        label: \"Template\",\n                        type: \"textarea\",\n                        id: \"templatetext\",\n                        rows: \"6\",\n                        value: this.state.template,\n                        readonly: true,\n                        onChange: function onChange(evt) {\n                          return _this3.updateTemplateValue(evt);\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 175,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                        className: \"font-weight-bold pl-0 my-4\",\n                        children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                          children: \"Email\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 176,\n                          columnNumber: 68\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 176,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(MDBInput, {\n                        label: \"To Email\",\n                        value: this.state.email,\n                        readonly: true,\n                        onChange: function onChange(evt) {\n                          return _this3.setState({\n                            email: evt.target.value\n                          });\n                        },\n                        className: \"mt-3\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 177,\n                        columnNumber: 23\n                      }, this), /*#__PURE__*/_jsxDEV(MDBInput, {\n                        label: \"Subject\",\n                        value: this.state.subject,\n                        readonly: true,\n                        onChange: function onChange(evt) {\n                          return _this3.setState({\n                            subject: evt.target.value\n                          });\n                        },\n                        className: \"mt-3\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 178,\n                        columnNumber: 23\n                      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                        className: \"font-weight-bold pl-0 my-4\",\n                        children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                          children: \"Template Values\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 179,\n                          columnNumber: 66\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 179,\n                        columnNumber: 23\n                      }, this), this.DynamicFormCreator(\"readonly\"), /*#__PURE__*/_jsxDEV(\"h3\", {\n                        className: \"font-weight-bold pl-0 my-4\",\n                        children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                          children: \"Preview\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 181,\n                          columnNumber: 66\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 181,\n                        columnNumber: 23\n                      }, this), /*#__PURE__*/_jsxDEV(MDBInput, {\n                        label: \"Template\",\n                        type: \"textarea\",\n                        id: \"templatetext\",\n                        rows: \"6\",\n                        value: this.state.preview,\n                        readonly: true\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 182,\n                        columnNumber: 23\n                      }, this), /*#__PURE__*/_jsxDEV(MDBBtn, {\n                        color: \"mdb-color\",\n                        rounded: true,\n                        className: \"float-left\",\n                        onClick: this.handleNextPrevClick(1)(2),\n                        children: \"previous\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 183,\n                        columnNumber: 23\n                      }, this), /*#__PURE__*/_jsxDEV(MDBBtn, {\n                        color: \"success\",\n                        rounded: true,\n                        className: \"float-right\",\n                        onClick: this.handleSubmission,\n                        children: \"submit\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 184,\n                        columnNumber: 23\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 173,\n                      columnNumber: 22\n                    }, this), this.state.formActivePanel1 == 4 && /*#__PURE__*/_jsxDEV(MDBCol, {\n                      md: \"12\",\n                      children: [!this.state.isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                          className: \"text-center font-weight-bold my-4\",\n                          children: \"Email sent!\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 191,\n                          columnNumber: 55\n                        }, this), /*#__PURE__*/_jsxDEV(MDBInput, {\n                          label: \"To Email\",\n                          value: this.state.email,\n                          readonly: true,\n                          className: \"mt-3\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 192,\n                          columnNumber: 23\n                        }, this), /*#__PURE__*/_jsxDEV(MDBInput, {\n                          label: \"Subject\",\n                          value: this.state.subject,\n                          readonly: true,\n                          className: \"mt-3\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 193,\n                          columnNumber: 23\n                        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                          className: \"font-weight-bold pl-0 my-4\",\n                          children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                            children: \"Preview\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 194,\n                            columnNumber: 66\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 194,\n                          columnNumber: 23\n                        }, this), /*#__PURE__*/_jsxDEV(MDBInput, {\n                          label: \"Template\",\n                          type: \"textarea\",\n                          id: \"templatetext\",\n                          rows: \"6\",\n                          value: this.state.preview\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 195,\n                          columnNumber: 23\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 191,\n                        columnNumber: 50\n                      }, this), this.state.isLoading && /*#__PURE__*/_jsxDEV(\"h2\", {\n                        className: \"text-center font-weight-bold my-4\",\n                        children: \"Busy sending\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 197,\n                        columnNumber: 48\n                      }, this), /*#__PURE__*/_jsxDEV(MDBBtn, {\n                        color: \"mdb-color\",\n                        rounded: true,\n                        className: \"float-right\",\n                        onClick: this.handleNextPrevClick(1)(1),\n                        children: \"Return to start\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 198,\n                        columnNumber: 23\n                      }, this), /*#__PURE__*/_jsxDEV(MDBBtn, {\n                        color: \"mdb-color\",\n                        rounded: true,\n                        className: \"float-left\",\n                        onClick: this.handleNextPrevClick(1)(3),\n                        children: \"previous\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 199,\n                        columnNumber: 23\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 189,\n                      columnNumber: 22\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 150,\n                    columnNumber: 19\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 149,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 145,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 7\n      }, this);\n    }\n  }]);\n\n  return FormsPage;\n}(Component);\n\nexport default FormsPage;","map":{"version":3,"sources":["C:/Users/lukas/Desktop/TechnicalThingy/technicalthingy/src/pages/FormsPage.js"],"names":["React","Component","MDBContainer","MDBRow","MDBCol","MDBInput","MDBBtn","MDBIcon","MDBCard","MDBCardBody","MDBModal","MDBModalBody","MDBModalFooter","DocsLink","SectionContainer","DynamicForm","FormsPage","state","modal","formActivePanel1","formActivePanel1Changed","template","isLoading","email","subject","templateValues","Object","preview","toggle","setState","swapFormActive","a","param","e","handleTemplateNextClick","keys","match","map","el","slice","length","forEach","val","ind","console","log","handleNextPrevClick","handleTemplateValuesNextClick","key","replace","handleSubmission","recipeUrl","postBody","requestMetadata","method","headers","body","JSON","stringify","fetch","then","res","json","calculateAutofocus","updateFormValue","evt","target","value","kkey","readonly","beautifyVariable","variableName","str","toString","split","charAt","toUpperCase","join","updateTemplateValue","DynamicFormCreator"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport {\r\n  MDBContainer,\r\n  MDBRow,\r\n  MDBCol,\r\n  MDBInput,\r\n  MDBBtn,\r\n  MDBIcon,\r\n  MDBCard,\r\n  MDBCardBody,\r\n  MDBModal,\r\n  MDBModalBody,\r\n  MDBModalFooter\r\n} from 'mdbreact';\r\nimport DocsLink from '../components/docsLink';\r\nimport SectionContainer from '../components/sectionContainer';\r\nimport DynamicForm from '../components/dynamicform';\r\nclass FormsPage extends Component {\r\n  state = {\r\n    modal: false,\r\n    formActivePanel1: 1,\r\n    formActivePanel1Changed: false,\r\n    template : \"\",\r\n    isLoading:false,\r\n    email:\"\",\r\n    subject:\"\",\r\n    templateValues:new Object(),\r\n    preview:{}\r\n  };\r\n\r\n  toggle = () => {\r\n    const { modal } = this.state;\r\n    this.setState({\r\n      modal: !modal\r\n    });\r\n  };\r\n  swapFormActive = (a) => (param) => (e) => {\r\n    this.setState({\r\n      ['formActivePanel' + a]: param,\r\n      ['formActivePanel' + a + 'Changed']: true\r\n    });\r\n  }\r\n  handleTemplateNextClick = (e) => {\r\n    this.state.templateValues = {};\r\n    var keys = this.state.template.match(/%%([a-zA-Z_]*)%%/g);\r\n    if(keys){\r\n      keys = keys.map((el)=>{return el.slice(2,el.length-2);});\r\n      keys.forEach((val,ind)=>{this.state.templateValues[val]=\"\";});\r\n    }\r\n    console.log(this.state); \r\n    return this.handleNextPrevClick(1)(4)(e);\r\n  }\r\n  handleTemplateValuesNextClick = (e) => {\r\n    this.state.preview = this.state.template;\r\n    for(var key in this.state.templateValues ){\r\n      this.state.preview = this.state.preview.replace(\"%%\" + key + \"%%\",this.state.templateValues[key]);\r\n    }\r\n    this.setState({\r\n      preview: this.state.preview \r\n    });\r\n    console.log(this.state); \r\n    return this.handleNextPrevClick(1)(3)(e);\r\n  }\r\n  handleSubmission = (e)=>{\r\n    const recipeUrl = 'http://localhost:9000/api/sendmail';\r\n    const postBody = {\r\n        template: this.state.template,\r\n        templateValues : this.state.templateValues,\r\n        email : this.state.email,\r\n        subject : this.state.subject\r\n    };\r\n    const requestMetadata = {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(postBody)\r\n    };\r\n    this.setState({  isLoading:true });\r\n    this.handleNextPrevClick(1)(4)(e);\r\n    fetch(recipeUrl, requestMetadata)\r\n        .then(res => res.json())\r\n        .then(email => {\r\n           console.log(email);\r\n            this.setState({ preview:email.preview, isLoading:false });\r\n        });\r\n  }\r\n  handleNextPrevClick = (a) => (param) => (e) => {\r\n    \r\n    this.setState({\r\n      ['formActivePanel' + a]: param,\r\n      ['formActivePanel' + a + 'Changed']: true\r\n    });\r\n  }\r\n  \r\ncalculateAutofocus = (a) => {\r\n  if (this.state['formActivePanel' + a + 'Changed']) {\r\n    return true\r\n  }\r\n}\r\nDynamicFormCreator(readonly){\r\n  const beautifyVariable = (variableName) =>{\r\n    var str = variableName.toString().split(\"_\").map((el)=>{return el.charAt(0).toUpperCase()  + el.slice(1);}).join(\" \");\r\n    return str;\r\n  };\r\n  console.log(this.state);\r\n  return (\r\n    <div>\r\n    {Object.keys(this.state.templateValues).map( (key, ind) => {return (\r\n      <MDBInput label={beautifyVariable(key)} value={this.state.templateValues[key]}  onChange={evt => this.updateFormValue(key)(evt)} className=\"mt-3\"/>\r\n    )})}\r\n    </div>\r\n  );\r\n\r\n};\r\nupdateFormValue = (key) => (evt) => {\r\n  this.state.templateValues[key] =  evt.target.value;\r\n\r\n  this.setState({\r\n    templateValues: this.state.templateValues\r\n  });\r\n  this.state.preview = this.state.template;\r\n  for(var kkey in this.state.templateValues ){\r\n    this.state.preview = this.state.preview.replace(\"%%\" + kkey + \"%%\",this.state.templateValues[kkey]);\r\n  }\r\n  this.setState({\r\n    preview: this.state.preview \r\n  });\r\n}\r\nupdateTemplateValue(evt){\r\n  this.setState({\r\n    template: evt.target.value\r\n  });\r\n}\r\n  render() {\r\n    const { modal } = this.state;\r\n\r\n    return (\r\n      <MDBContainer className='mt-5'>\r\n        \r\n       \r\n          <MDBRow>\r\n            <MDBCol md='12'>\r\n              <SectionContainer>\r\n              <MDBContainer>\r\n                <h2 className=\"text-center font-weight-bold pt-4 pb-5 mb-2\"><strong>Email form  </strong></h2>\r\n               \r\n\r\n                <form role=\"form\" action=\"\" method=\"post\">\r\n                  <MDBRow>\r\n                    {this.state.formActivePanel1 == 1 &&\r\n                    (<MDBCol md=\"12\">\r\n                      <h3 className=\"font-weight-bold pl-0 my-4\">\r\n                        <strong>Template</strong></h3>\r\n                        <MDBInput label=\"Template\" type=\"textarea\" id=\"templatetext\" rows=\"6\" value={this.state.template} onChange={evt => this.updateTemplateValue(evt)}/>\r\n                      <MDBBtn color=\"mdb-color\" rounded className=\"float-right\" onClick={this.handleTemplateNextClick}>next</MDBBtn>\r\n                    </MDBCol>)}\r\n\r\n                    {this.state.formActivePanel1 == 2 &&\r\n                    (<MDBCol md=\"12\">\r\n                       <h3 className=\"font-weight-bold pl-0 my-4\"><strong>Template</strong></h3>\r\n                        <MDBInput label=\"Template\" type=\"textarea\" id=\"templatetext\" rows=\"6\" value={this.state.template} readonly onChange={evt => this.updateTemplateValue(evt)}/>\r\n                        <h3 className=\"font-weight-bold pl-0 my-4\"><strong>Email</strong></h3> \r\n                      <MDBInput label=\"To Email\" value={this.state.email} onChange={evt => this.setState({email: evt.target.value})} className=\"mt-3\"/>\r\n                      <MDBInput label=\"Subject\" value={this.state.subject} onChange={evt => this.setState({subject: evt.target.value})} className=\"mt-3\"/>\r\n                      <h3 className=\"font-weight-bold pl-0 my-4\"><strong>Template Values</strong></h3>\r\n                      {this.state.templateValues && this.DynamicFormCreator()}\r\n                      <MDBBtn color=\"mdb-color\" rounded className=\"float-left\" onClick={this.handleNextPrevClick(1)(1)}>previous</MDBBtn>\r\n                      <MDBBtn color=\"mdb-color\" rounded className=\"float-right\" onClick={this.handleTemplateValuesNextClick}>next</MDBBtn>\r\n                    </MDBCol>)}\r\n\r\n                    {this.state.formActivePanel1 == 3 &&\r\n                    (<MDBCol md=\"12\">\r\n                       <h3 className=\"font-weight-bold pl-0 my-4\"><strong>Template</strong></h3>\r\n                        <MDBInput label=\"Template\" type=\"textarea\" id=\"templatetext\" rows=\"6\" value={this.state.template} readonly onChange={evt => this.updateTemplateValue(evt)}/>\r\n                        <h3 className=\"font-weight-bold pl-0 my-4\"><strong>Email</strong></h3> \r\n                      <MDBInput label=\"To Email\" value={this.state.email} readonly onChange={evt => this.setState({email: evt.target.value})} className=\"mt-3\"/>\r\n                      <MDBInput label=\"Subject\" value={this.state.subject} readonly onChange={evt => this.setState({subject: evt.target.value})} className=\"mt-3\"/>\r\n                      <h3 className=\"font-weight-bold pl-0 my-4\"><strong>Template Values</strong></h3>\r\n                      {this.DynamicFormCreator(\"readonly\")}\r\n                      <h3 className=\"font-weight-bold pl-0 my-4\"><strong>Preview</strong></h3>\r\n                      <MDBInput label=\"Template\" type=\"textarea\" id=\"templatetext\" rows=\"6\" value={this.state.preview} readonly/>\r\n                      <MDBBtn color=\"mdb-color\" rounded className=\"float-left\" onClick={this.handleNextPrevClick(1)(2)}>previous</MDBBtn>\r\n                      <MDBBtn color=\"success\" rounded className=\"float-right\" onClick={this.handleSubmission}>submit</MDBBtn>\r\n                     \r\n                    </MDBCol>)}\r\n\r\n                    {this.state.formActivePanel1 == 4 &&\r\n                    (<MDBCol md=\"12\">\r\n\r\n                      {!this.state.isLoading && (<div><h2 className=\"text-center font-weight-bold my-4\">Email sent!</h2>\r\n                      <MDBInput label=\"To Email\" value={this.state.email} readonly className=\"mt-3\"/>\r\n                      <MDBInput label=\"Subject\" value={this.state.subject} readonly className=\"mt-3\"/>\r\n                      <h3 className=\"font-weight-bold pl-0 my-4\"><strong>Preview</strong></h3>\r\n                      <MDBInput label=\"Template\" type=\"textarea\" id=\"templatetext\" rows=\"6\" value={this.state.preview}/>\r\n                      </div>)}\r\n                      {this.state.isLoading && <h2 className=\"text-center font-weight-bold my-4\">Busy sending</h2>}\r\n                      <MDBBtn color=\"mdb-color\" rounded className=\"float-right\" onClick={this.handleNextPrevClick(1)(1)}>Return to start</MDBBtn>\r\n                      <MDBBtn color=\"mdb-color\" rounded className=\"float-left\" onClick={this.handleNextPrevClick(1)(3)}>previous</MDBBtn>\r\n                    </MDBCol>)}\r\n                  </MDBRow>\r\n                </form>\r\n              </MDBContainer>\r\n              </SectionContainer>\r\n            </MDBCol>\r\n            \r\n          </MDBRow>\r\n\r\n      </MDBContainer>\r\n    );\r\n  }\r\n}\r\n\r\nexport default FormsPage;\r\n"]},"metadata":{},"sourceType":"module"}